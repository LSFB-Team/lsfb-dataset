<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Datasets - LSFB Dataset</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Datasets";
        var mkdocs_page_input_path = "datasets.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> LSFB Dataset
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../howto/">How To</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../lsfb_isol/">LSFB Isol</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../lsfb_cont/">LSFB Cont</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Datasets</a>
    <ul class="current">
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../download/">Download Datasets</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">LSFB Dataset</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Datasets</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets"></a>
  <div class="doc doc-contents first">
  
      <h2 id="lsfb_dataset.datasets--module-datasets">Module Datasets</h2>
<p>This module provides configurations classes and iterators for the lsfb_iso and lsfb_cont dataset.
The module is organised in two submodules : One for the continuous dataset and one for the isolated one.</p>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_cont"></a>
  <div class="doc doc-contents first">
  
      <h3 id="lsfb_dataset.datasets.lsfb_cont--lsfb_cont">lsfb_cont</h3>
<p>This module contains classes helping to manipulate the lsfb_cont dataset. The provided classes are :</p>
<ul>
<li><strong>LSFBContConfig</strong> : <a href="https://docs.python.org/3/library/dataclasses.html">dataclass</a> allowing to configure how the dataset will be loaded</li>
<li><strong>LSFBContLandmarks</strong> : Iterator class loading the lsfb_cont landmarks according to the configuration provided.</li>
<li><strong>LSFBContLandmarksGenerator</strong> : Generator class loading the lsfb_cont landmarks according to the configuration provided.</li>
</ul>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_cont.config"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_cont.config.LSFBContConfig" class="doc doc-heading">
        <code>LSFBContConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">

  
      <p>Simple configuration class for the LSFB_CONT dataset.
Each instance of the LSFB_CONT dataset is a video with corresponding annotations.
Each annotation is made up of a segment (start, end) and a label.</p>
<p>LSFB: French Belgian Sign Language
CONT: Continuous videos in LSFB</p>
<p>See <code>LSFBContLandmarks</code> to load the dataset.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>root</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Root directory of the LSFB_CONT dataset.
The dataset must already be downloaded !</p>
              </div>
            </li>
            <li>
              <b>landmarks</b>
                  (<code><span title="typing.Optional">Optional</span>[tuple[str, ...]]</code>)
              –
              <div class="doc-md-description">
                <p>Select which landmarks (features) to use.
'face' for face mesh (468 landmarks);
'pose' for pose skeleton (23 landmarks);
'left_hand' for left hand skeleton (21 landmarks);
'right_hand' for right hand skeleton (21 landmarks);
Default = ('pose', 'left_hand', 'right_hand').</p>
              </div>
            </li>
            <li>
              <b>use_3d</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, use 3D landmarks. Otherwise, use 2D landmarks.
Default=False.</p>
              </div>
            </li>
            <li>
              <b>use_raw</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, use raw landmarks. Otherwise, use preprocessed landmarks where:
- missing landmarks are interpolated;
- vibrations have been reduced by using smoothing (Savitchy Golay filter).
Default=False.</p>
              </div>
            </li>
            <li>
              <b>features_transform</b>
                  (<code>callable</code>)
              –
              <div class="doc-md-description">
                <p>Callable object used to transform the features.</p>
              </div>
            </li>
            <li>
              <b>target_transform</b>
                  (<code>callable</code>)
              –
              <div class="doc-md-description">
                <p>Callable object used to transform the targets.</p>
              </div>
            </li>
            <li>
              <b>transform</b>
                  (<code>callable</code>)
              –
              <div class="doc-md-description">
                <p>Callable object used to transform both the features and the targets.</p>
              </div>
            </li>
            <li>
              <b>split</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specify which subset of the dataset is used.
'fold_x' where x is in {0, 1, 2, 3, 4} for a specific fold;
'train' for training set (folds 2, 3, 4);
'test' for the test set (folds 0 and 1);
'all' for all the instances of the dataset (all folds);
'mini_sample' for a tiny set of instances (10 instances).
Default = 'all'.</p>
              </div>
            </li>
            <li>
              <b>hands</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Only load the sign of a specific hand, or both of them.
'right' for the signs from the right hand of the signer;
'left' for the signs from the left hand of the signer;
'both' for the signs from both hands of the signer.
Default = 'both'.</p>
              </div>
            </li>
            <li>
              <b>segment_level</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specifies the level at which annotations are extracted.
'signs'
'subtitles'
Default = 'signs'</p>
              </div>
            </li>
            <li>
              <b>segment_label</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specify which label to use for each segment.
'sign_gloss': the gloss of the signs is used. Example: HAND
'sign_index': the index (class) of the signs is used. Example: 45
'text': the text of the sign, or subtitle, is used. This can be useful when annotations are subtitles.
If the annotations are subtitles, multiple labels are assigned to a segment.
For example, a sequence of glosses, indices or event the full text of the subtitles.
Default='sign_index'</p>
              </div>
            </li>
            <li>
              <b>segment_unit</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specify which unit is used for the boundaries (start, end) of the annotations.
'frame': frame indices in annotations boundaries.
'ms': milliseconds in annotations boundaries.
default='ms'</p>
              </div>
            </li>
            <li>
              <b>n_labels</b>
                  (<code><span title="typing.Union">Union</span>[int, None]</code>)
              –
              <div class="doc-md-description">
                <p>If this parameter is an integer <code>x</code>, then <code>x+1</code> labels are used for the <code>x</code> most
frequent signs and the background label. If none, the number of labels is the number of different signs
in the dataset no matter their occurrences.
This parameter is used to filter out signs with very few examples.
Default=750</p>
              </div>
            </li>
            <li>
              <b>window</b>
                  (<code><span title="typing.Optional">Optional</span>[tuple[int, int]]</code>)
              –
              <div class="doc-md-description">
                <p>Optional argument (window_size, window_stride) to use fixed-size windows instead of
variable length sequences.
If specified, the dataset is windowed with a window size and a window stride.
Be careful, this argument changes the number of instances in the dataset !
Default = None.</p>
              </div>
            </li>
            <li>
              <b>show_progress</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, shows a progress bar while the dataset is loading. Default = True.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="author" open>
  <summary>Author</summary>
  <p>ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_cont/config.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LSFBContConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Simple configuration class for the LSFB_CONT dataset.</span>
<span class="sd">        Each instance of the LSFB_CONT dataset is a video with corresponding annotations.</span>
<span class="sd">        Each annotation is made up of a segment (start, end) and a label.</span>

<span class="sd">        LSFB: French Belgian Sign Language</span>
<span class="sd">        CONT: Continuous videos in LSFB</span>

<span class="sd">        See `LSFBContLandmarks` to load the dataset.</span>

<span class="sd">        Args:</span>
<span class="sd">            root: Root directory of the LSFB_CONT dataset.</span>
<span class="sd">                The dataset must already be downloaded !</span>
<span class="sd">            landmarks: Select which landmarks (features) to use.</span>
<span class="sd">                &#39;face&#39; for face mesh (468 landmarks);</span>
<span class="sd">                &#39;pose&#39; for pose skeleton (23 landmarks);</span>
<span class="sd">                &#39;left_hand&#39; for left hand skeleton (21 landmarks);</span>
<span class="sd">                &#39;right_hand&#39; for right hand skeleton (21 landmarks);</span>
<span class="sd">                Default = (&#39;pose&#39;, &#39;left_hand&#39;, &#39;right_hand&#39;).</span>
<span class="sd">            use_3d: If true, use 3D landmarks. Otherwise, use 2D landmarks.</span>
<span class="sd">                Default=False.</span>
<span class="sd">            use_raw: If true, use raw landmarks. Otherwise, use preprocessed landmarks where:</span>
<span class="sd">                - missing landmarks are interpolated;</span>
<span class="sd">                - vibrations have been reduced by using smoothing (Savitchy Golay filter).</span>
<span class="sd">                Default=False.</span>

<span class="sd">            features_transform: Callable object used to transform the features.</span>
<span class="sd">            target_transform: Callable object used to transform the targets.</span>
<span class="sd">            transform: Callable object used to transform both the features and the targets.</span>

<span class="sd">            split: Specify which subset of the dataset is used.</span>
<span class="sd">                &#39;fold_x&#39; where x is in {0, 1, 2, 3, 4} for a specific fold;</span>
<span class="sd">                &#39;train&#39; for training set (folds 2, 3, 4);</span>
<span class="sd">                &#39;test&#39; for the test set (folds 0 and 1);</span>
<span class="sd">                &#39;all&#39; for all the instances of the dataset (all folds);</span>
<span class="sd">                &#39;mini_sample&#39; for a tiny set of instances (10 instances).</span>
<span class="sd">                Default = &#39;all&#39;.</span>

<span class="sd">            hands: Only load the sign of a specific hand, or both of them.</span>
<span class="sd">                &#39;right&#39; for the signs from the right hand of the signer;</span>
<span class="sd">                &#39;left&#39; for the signs from the left hand of the signer;</span>
<span class="sd">                &#39;both&#39; for the signs from both hands of the signer.</span>
<span class="sd">                Default = &#39;both&#39;.</span>
<span class="sd">            segment_level: Specifies the level at which annotations are extracted.</span>
<span class="sd">                &#39;signs&#39;</span>
<span class="sd">                &#39;subtitles&#39;</span>
<span class="sd">                Default = &#39;signs&#39;</span>
<span class="sd">            segment_label: Specify which label to use for each segment.</span>
<span class="sd">                &#39;sign_gloss&#39;: the gloss of the signs is used. Example: HAND</span>
<span class="sd">                &#39;sign_index&#39;: the index (class) of the signs is used. Example: 45</span>
<span class="sd">                &#39;text&#39;: the text of the sign, or subtitle, is used. This can be useful when annotations are subtitles.</span>
<span class="sd">                If the annotations are subtitles, multiple labels are assigned to a segment.</span>
<span class="sd">                For example, a sequence of glosses, indices or event the full text of the subtitles.</span>
<span class="sd">                Default=&#39;sign_index&#39;</span>
<span class="sd">            segment_unit: Specify which unit is used for the boundaries (start, end) of the annotations.</span>
<span class="sd">                &#39;frame&#39;: frame indices in annotations boundaries.</span>
<span class="sd">                &#39;ms&#39;: milliseconds in annotations boundaries.</span>
<span class="sd">                default=&#39;ms&#39;</span>

<span class="sd">            n_labels: If this parameter is an integer `x`, then `x+1` labels are used for the `x` most</span>
<span class="sd">                frequent signs and the background label. If none, the number of labels is the number of different signs</span>
<span class="sd">                in the dataset no matter their occurrences.</span>
<span class="sd">                This parameter is used to filter out signs with very few examples.</span>
<span class="sd">                Default=750</span>

<span class="sd">            window: Optional argument (window_size, window_stride) to use fixed-size windows instead of</span>
<span class="sd">                variable length sequences.</span>
<span class="sd">                If specified, the dataset is windowed with a window size and a window stride.</span>
<span class="sd">                Be careful, this argument changes the number of instances in the dataset !</span>
<span class="sd">                Default = None.</span>

<span class="sd">            show_progress: If true, shows a progress bar while the dataset is loading. Default = True.</span>

<span class="sd">        Author:</span>
<span class="sd">            ppoitier (v 2.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">root</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">landmarks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;pose&#39;</span><span class="p">,</span> <span class="s1">&#39;left_hand&#39;</span><span class="p">,</span> <span class="s1">&#39;right_hand&#39;</span><span class="p">)</span>
    <span class="n">use_3d</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">use_raw</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">features_transform</span><span class="p">:</span> <span class="n">callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">target_transform</span><span class="p">:</span> <span class="n">callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">transform</span><span class="p">:</span> <span class="n">callable</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">split</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>

    <span class="n">hands</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;both&#39;</span>
    <span class="n">segment_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;signs&#39;</span>
    <span class="n">segment_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;sign_index&#39;</span>
    <span class="n">segment_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;ms&#39;</span>

    <span class="n">n_labels</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="mi">750</span>

    <span class="n">window</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">show_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_cont.landmarks"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_cont.landmarks.LSFBContLandmarks" class="doc doc-heading">
        <code>LSFBContLandmarks</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="lsfb_dataset.datasets.lsfb_cont.base.LSFBContBase">LSFBContBase</span></code></p>

  
      <p>Utility class to load the LSFB CONT Landmarks dataset.
The dataset must be already downloaded!</p>
<p>All the landmarks and targets are loaded in memory.
Therefore, iterating over all the instances is fast but consumes a lot of RAM.
If you don't have enough RAM, use the <code>LSFBContLandmarksGenerator</code> class instead.</p>

<details class="example" open>
  <summary>Example</summary>
  <pre><code class="language-python">my_dataset_config = LSFBContConfig(
    root=&quot;./my_dataset&quot;,
    landmarks=['pose', 'left_hand', 'right_hand'],
    split=&quot;fold_1&quot;,
    n_labels=750,
    segment_level='signs',
    segment_unit='frame',
    segment_label='sign_gloss',
    use_3d=True,
    window=(1500, 1200),
)

my_dataset = LSFBContLandmarks(my_dataset_config)
features, target_annotations = dataset[10]
</code></pre>
</details>      <p>If you did not download the dataset, see <code>lsfb_dataset.Downloader</code>.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>config</b>
                  (<code><a class="autorefs autorefs-internal" title="lsfb_dataset.datasets.lsfb_cont.config.LSFBContConfig" href="#lsfb_dataset.datasets.lsfb_cont.config.LSFBContConfig">LSFBContConfig</a></code>)
              –
              <div class="doc-md-description">
                <p>The configuration object (see <code>LSFBContConfig</code>).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="author" open>
  <summary>Author</summary>
  <p>ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_cont/landmarks.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LSFBContLandmarks</span><span class="p">(</span><span class="n">LSFBContBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility class to load the LSFB CONT Landmarks dataset.</span>
<span class="sd">        The dataset must be already downloaded!</span>

<span class="sd">        All the landmarks and targets are loaded in memory.</span>
<span class="sd">        Therefore, iterating over all the instances is fast but consumes a lot of RAM.</span>
<span class="sd">        If you don&#39;t have enough RAM, use the `LSFBContLandmarksGenerator` class instead.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            my_dataset_config = LSFBContConfig(</span>
<span class="sd">                root=&quot;./my_dataset&quot;,</span>
<span class="sd">                landmarks=[&#39;pose&#39;, &#39;left_hand&#39;, &#39;right_hand&#39;],</span>
<span class="sd">                split=&quot;fold_1&quot;,</span>
<span class="sd">                n_labels=750,</span>
<span class="sd">                segment_level=&#39;signs&#39;,</span>
<span class="sd">                segment_unit=&#39;frame&#39;,</span>
<span class="sd">                segment_label=&#39;sign_gloss&#39;,</span>
<span class="sd">                use_3d=True,</span>
<span class="sd">                window=(1500, 1200),</span>
<span class="sd">            )</span>

<span class="sd">            my_dataset = LSFBContLandmarks(my_dataset_config)</span>
<span class="sd">            features, target_annotations = dataset[10]</span>
<span class="sd">            ```</span>

<span class="sd">        If you did not download the dataset, see `lsfb_dataset.Downloader`.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: The configuration object (see `LSFBContConfig`).</span>

<span class="sd">        Author:</span>
<span class="sd">            ppoitier (v 2.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: add class properties to docstring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LSFBContConfig</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_features</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__get_instance__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_transforms</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span>

    <span class="k">def</span> <span class="nf">__get_window__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">{</span><span class="n">lm</span><span class="p">:</span> <span class="n">lm_feat</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="k">for</span> <span class="n">lm</span><span class="p">,</span> <span class="n">lm_feat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">segment_unit</span> <span class="o">==</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="p">((</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">((</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span> <span class="o">*</span> <span class="mi">20</span>
            <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span> <span class="o">*</span> <span class="mi">20</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="p">(</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="p">]</span>
            <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span>
            <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_transforms</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span>

    <span class="k">def</span> <span class="nf">_load_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pose_folder</span> <span class="o">=</span> <span class="s1">&#39;poses_raw&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_raw</span> <span class="k">else</span> <span class="s1">&#39;poses&#39;</span>
        <span class="n">coordinate_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_3d</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">instance_id</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">,</span> <span class="n">disable</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">show_progress</span><span class="p">)):</span>
            <span class="n">instance_feat</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">landmark_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">landmarks</span><span class="p">:</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pose_folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">landmark_set</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">instance_id</span><span class="si">}</span><span class="s2">.npy&quot;</span>
                <span class="n">instance_feat</span><span class="p">[</span><span class="n">landmark_set</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filepath</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="n">coordinate_indices</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_feat</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_cont.landmarks_generator"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_cont.landmarks_generator.LSFBContLandmarksGenerator" class="doc doc-heading">
        <code>LSFBContLandmarksGenerator</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="lsfb_dataset.datasets.lsfb_cont.base.LSFBContBase">LSFBContBase</span></code></p>

  
      <p>Utility class to load the LSFB CONT Landmarks dataset.
The dataset must be already downloaded!</p>
<p>All the landmarks and targets are lazily loaded.
Therefore, iterating over all the instances can be a bit slow.
If you have enough RAM and want faster iterations, use the <code>LSFBContLandmarks</code> class instead.</p>

<details class="example" open>
  <summary>Example</summary>
  <pre><code class="language-python">my_dataset_config = LSFBContConfig(
    root=&quot;./my_dataset&quot;,
    landmarks=['pose', 'left_hand', 'right_hand'],
    split=&quot;fold_1&quot;,
    n_labels=750,
    segment_level='signs',
    segment_unit='frame',
    segment_label='sign_gloss',
    use_3d=True,
    window=(1500, 1200),
)

my_dataset = LSFBContLandmarksGenerator(my_dataset_config)
features, target_annotations = dataset[10]
</code></pre>
</details>      <p>If you did not download the dataset, see <code>lsfb_dataset.Downloader</code>.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>config</b>
                  (<code><a class="autorefs autorefs-internal" title="lsfb_dataset.datasets.lsfb_cont.config.LSFBContConfig" href="#lsfb_dataset.datasets.lsfb_cont.config.LSFBContConfig">LSFBContConfig</a></code>)
              –
              <div class="doc-md-description">
                <p>The configuration object (see <code>LSFBContConfig</code>).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="author" open>
  <summary>Author</summary>
  <p>ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_cont/landmarks_generator.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LSFBContLandmarksGenerator</span><span class="p">(</span><span class="n">LSFBContBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility class to load the LSFB CONT Landmarks dataset.</span>
<span class="sd">        The dataset must be already downloaded!</span>

<span class="sd">        All the landmarks and targets are lazily loaded.</span>
<span class="sd">        Therefore, iterating over all the instances can be a bit slow.</span>
<span class="sd">        If you have enough RAM and want faster iterations, use the `LSFBContLandmarks` class instead.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            my_dataset_config = LSFBContConfig(</span>
<span class="sd">                root=&quot;./my_dataset&quot;,</span>
<span class="sd">                landmarks=[&#39;pose&#39;, &#39;left_hand&#39;, &#39;right_hand&#39;],</span>
<span class="sd">                split=&quot;fold_1&quot;,</span>
<span class="sd">                n_labels=750,</span>
<span class="sd">                segment_level=&#39;signs&#39;,</span>
<span class="sd">                segment_unit=&#39;frame&#39;,</span>
<span class="sd">                segment_label=&#39;sign_gloss&#39;,</span>
<span class="sd">                use_3d=True,</span>
<span class="sd">                window=(1500, 1200),</span>
<span class="sd">            )</span>

<span class="sd">            my_dataset = LSFBContLandmarksGenerator(my_dataset_config)</span>
<span class="sd">            features, target_annotations = dataset[10]</span>
<span class="sd">            ```</span>

<span class="sd">        If you did not download the dataset, see `lsfb_dataset.Downloader`.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: The configuration object (see `LSFBContConfig`).</span>

<span class="sd">        Author:</span>
<span class="sd">            ppoitier (v 2.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LSFBContConfig</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">LSFBContLandmarksGenerator</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__get_instance__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_instance_features</span><span class="p">(</span><span class="n">instance_id</span><span class="p">)</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_transforms</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span>

    <span class="k">def</span> <span class="nf">__get_window__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_instance_features</span><span class="p">(</span><span class="n">instance_id</span><span class="p">)</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">{</span><span class="n">lm</span><span class="p">:</span> <span class="n">lm_feat</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span> <span class="k">for</span> <span class="n">lm</span><span class="p">,</span> <span class="n">lm_feat</span> <span class="ow">in</span> <span class="n">features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

        <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">segment_unit</span> <span class="o">==</span> <span class="s1">&#39;ms&#39;</span><span class="p">:</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="p">((</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">((</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">annotations</span> <span class="o">=</span> <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
                <span class="p">(</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;start&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span>
        <span class="n">annotations</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotations</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">start</span>
        <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_transforms</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">annotations</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">annotations</span>

    <span class="k">def</span> <span class="nf">_load_instance_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">pose_folder</span> <span class="o">=</span> <span class="s1">&#39;poses_raw&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_raw</span> <span class="k">else</span> <span class="s1">&#39;poses&#39;</span>
        <span class="n">coordinate_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_3d</span> <span class="k">else</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">landmark_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">landmarks</span><span class="p">:</span>
            <span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pose_folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">landmark_set</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">instance_id</span><span class="si">}</span><span class="s2">.npy&quot;</span>
            <span class="n">features</span><span class="p">[</span><span class="n">landmark_set</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filepath</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="n">coordinate_indices</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">features</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_isol"></a>
  <div class="doc doc-contents first">
  
      <h3 id="lsfb_dataset.datasets.lsfb_isol--lsfb_isol">lsfb_isol</h3>
<p>This module contains classes helping to manipulate the lsfb_isol dataset. The provided classes are :</p>
<ul>
<li><strong>LSFBIsolConfig</strong> : <a href="https://docs.python.org/3/library/dataclasses.html">dataclass</a> allowing to configure
how the dataset will be loaded</li>
<li><strong>LSFBIsolLandmarks</strong> : Iterator class loading the lsfb_isol landmarks according to the configuration provided.</li>
<li><strong>LSFBIsolLandmarksGenerator</strong> : Generator class loading the lsfb_isol landmarks according to the configuration
provided.</li>
</ul>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_isol.config"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_isol.config.LSFBIsolConfig" class="doc doc-heading">
        <code>LSFBIsolConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">

  
      <p>Simple configuration class for the LSFB ISOL Dataset.</p>
<p>LSFB: French Belgian Sign Language
ISOL: Isolated signs (videos and poses) in LSFB</p>
<p>If you did not download the dataset, see <code>lsfb_dataset.Downloader</code>.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>root</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Root directory of the LSFB_ISOL dataset.
The dataset must already be downloaded!</p>
              </div>
            </li>
            <li>
              <b>landmarks</b>
                  (<code><span title="typing.Optional">Optional</span>[tuple[str, ...]]</code>)
              –
              <div class="doc-md-description">
                <p>Select which landmarks (features) to use:
'face' for face mesh (468 landmarks);
'pose' for pose skeleton (23 landmarks);
'left_hand' for left hand skeleton (21 landmarks);
'right_hand' for right hand skeleton (21 landmarks);
Default = ['pose', 'left_hand', 'right_hand'].</p>
              </div>
            </li>
            <li>
              <b>use_3d</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, use 3D landmarks. Otherwise, use 2D landmarks. Default = False.</p>
              </div>
            </li>
            <li>
              <b>use_raw</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, use raw landmarks. Otherwise, use preprocessed landmarks where:
- missing landmarks are interpolated (linear interpolation);
- vibrations have been reduced by using smoothing (Savitchy Golay filter).
Default = False.</p>
              </div>
            </li>
            <li>
              <b>target</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specify which target is returned with the features for each instance:
'sign_index': the index of the sign is used;
'sign_gloss': the gloss of the sign is used;
Default = 'sign_index'.</p>
              </div>
            </li>
            <li>
              <b>transform</b>
                  (<code>callable</code>)
              –
              <div class="doc-md-description">
                <p>Callable object used to transform the features.</p>
              </div>
            </li>
            <li>
              <b>split</b>
                  (<code>str</code>)
              –
              <div class="doc-md-description">
                <p>Specify which subset of the dataset is used.
'fold_x' where x is in {0, 1, 2, 3, 4} for a specific fold;
'train' for training set (folds 2, 3, 4);
'test' for the test set (folds 0 and 1);
'all' for all the instances of the dataset (all folds);
'mini_sample' for a tiny set of instances (10 instances).
Default = 'all'.</p>
              </div>
            </li>
            <li>
              <b>sequence_max_length</b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>(Optional) Max length of the clip sequence. Default=50.</p>
              </div>
            </li>
            <li>
              <b>n_labels</b>
                  (<code>int</code>)
              –
              <div class="doc-md-description">
                <p>If this parameter is an integer <code>x</code>, then <code>x+1</code> labels are used for the <code>x</code> most
frequent signs and the background label. If none, the number of labels is the number of different signs
in the dataset no matter their occurrences.
This parameter is used to filter out signs with very few examples.
Default=750.</p>
              </div>
            </li>
            <li>
              <b>show_progress</b>
                  (<code>bool</code>)
              –
              <div class="doc-md-description">
                <p>If true, shows a progress bar while the dataset is loading. Default = True.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="authors" open>
  <summary>Authors</summary>
  <p>jfink (v 1.0)
ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_isol/config.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">LSFBIsolConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simple configuration class for the LSFB ISOL Dataset.</span>

<span class="sd">    LSFB: French Belgian Sign Language</span>
<span class="sd">    ISOL: Isolated signs (videos and poses) in LSFB</span>

<span class="sd">    If you did not download the dataset, see `lsfb_dataset.Downloader`.</span>

<span class="sd">    Args:</span>
<span class="sd">        root: Root directory of the LSFB_ISOL dataset.</span>
<span class="sd">            The dataset must already be downloaded!</span>
<span class="sd">        landmarks: Select which landmarks (features) to use:</span>
<span class="sd">            &#39;face&#39; for face mesh (468 landmarks);</span>
<span class="sd">            &#39;pose&#39; for pose skeleton (23 landmarks);</span>
<span class="sd">            &#39;left_hand&#39; for left hand skeleton (21 landmarks);</span>
<span class="sd">            &#39;right_hand&#39; for right hand skeleton (21 landmarks);</span>
<span class="sd">            Default = [&#39;pose&#39;, &#39;left_hand&#39;, &#39;right_hand&#39;].</span>
<span class="sd">        use_3d: If true, use 3D landmarks. Otherwise, use 2D landmarks. Default = False.</span>
<span class="sd">        use_raw: If true, use raw landmarks. Otherwise, use preprocessed landmarks where:</span>
<span class="sd">            - missing landmarks are interpolated (linear interpolation);</span>
<span class="sd">            - vibrations have been reduced by using smoothing (Savitchy Golay filter).</span>
<span class="sd">            Default = False.</span>

<span class="sd">        target: Specify which target is returned with the features for each instance:</span>
<span class="sd">            &#39;sign_index&#39;: the index of the sign is used;</span>
<span class="sd">            &#39;sign_gloss&#39;: the gloss of the sign is used;</span>
<span class="sd">            Default = &#39;sign_index&#39;.</span>

<span class="sd">        transform: Callable object used to transform the features.</span>

<span class="sd">        split: Specify which subset of the dataset is used.</span>
<span class="sd">            &#39;fold_x&#39; where x is in {0, 1, 2, 3, 4} for a specific fold;</span>
<span class="sd">            &#39;train&#39; for training set (folds 2, 3, 4);</span>
<span class="sd">            &#39;test&#39; for the test set (folds 0 and 1);</span>
<span class="sd">            &#39;all&#39; for all the instances of the dataset (all folds);</span>
<span class="sd">            &#39;mini_sample&#39; for a tiny set of instances (10 instances).</span>
<span class="sd">            Default = &#39;all&#39;.</span>

<span class="sd">        sequence_max_length: (Optional) Max length of the clip sequence. Default=50.</span>

<span class="sd">        n_labels: If this parameter is an integer `x`, then `x+1` labels are used for the `x` most</span>
<span class="sd">            frequent signs and the background label. If none, the number of labels is the number of different signs</span>
<span class="sd">            in the dataset no matter their occurrences.</span>
<span class="sd">            This parameter is used to filter out signs with very few examples.</span>
<span class="sd">            Default=750.</span>

<span class="sd">        show_progress: If true, shows a progress bar while the dataset is loading. Default = True.</span>

<span class="sd">    Authors:</span>
<span class="sd">        jfink (v 1.0)</span>
<span class="sd">        ppoitier (v 2.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">root</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">landmarks</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;pose&quot;</span><span class="p">,</span> <span class="s2">&quot;left_hand&quot;</span><span class="p">,</span> <span class="s2">&quot;right_hand&quot;</span><span class="p">)</span>
    <span class="n">use_3d</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">use_raw</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">target</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sign_index&quot;</span>

    <span class="n">transform</span><span class="p">:</span> <span class="n">callable</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">split</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>
    <span class="n">n_labels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">750</span>
    <span class="n">sequence_max_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span>

    <span class="n">show_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_isol.landmarks"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_isol.landmarks.LSFBIsolLandmarks" class="doc doc-heading">
        <code>LSFBIsolLandmarks</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="lsfb_dataset.datasets.lsfb_isol.base.LSFBIsolBase">LSFBIsolBase</span></code></p>

  
      <p>Utility class to load the LSFB ISOL Landmarks dataset.
The dataset must be already downloaded!</p>
<p>All the landmarks and targets are loaded in memory.
Therefore, iterating over all the instances is fast but consumes a lot of RAM.
If you don't have enough RAM, use the <code>LSFBIsolLandmarksGenerator</code> class instead.</p>

<details class="example" open>
  <summary>Example</summary>
  <pre><code class="language-python">my_dataset_config = LSFBIsolConfig(
    root=&quot;./my_dataset&quot;,
    split=&quot;fold_1&quot;,
    n_labels=750,
    target='sign_gloss',
    sequence_max_length=10,
    use_3d=True,
)

my_dataset = LSFBIsolLandmarks(my_dataset_config)
features, target = dataset[30]
</code></pre>
</details>      <p>If you did not download the dataset, see <code>lsfb_dataset.Downloader</code>.</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>config</b>
                  (<code><a class="autorefs autorefs-internal" title="lsfb_dataset.datasets.lsfb_isol.config.LSFBIsolConfig" href="#lsfb_dataset.datasets.lsfb_isol.config.LSFBIsolConfig">LSFBIsolConfig</a></code>)
              –
              <div class="doc-md-description">
                <p>The configuration object (see <code>LSFBContConfig</code>).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="author" open>
  <summary>Author</summary>
  <p>ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_isol/landmarks.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LSFBIsolLandmarks</span><span class="p">(</span><span class="n">LSFBIsolBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Utility class to load the LSFB ISOL Landmarks dataset.</span>
<span class="sd">    The dataset must be already downloaded!</span>

<span class="sd">    All the landmarks and targets are loaded in memory.</span>
<span class="sd">    Therefore, iterating over all the instances is fast but consumes a lot of RAM.</span>
<span class="sd">    If you don&#39;t have enough RAM, use the `LSFBIsolLandmarksGenerator` class instead.</span>

<span class="sd">    Example:</span>
<span class="sd">        ```python</span>
<span class="sd">        my_dataset_config = LSFBIsolConfig(</span>
<span class="sd">            root=&quot;./my_dataset&quot;,</span>
<span class="sd">            split=&quot;fold_1&quot;,</span>
<span class="sd">            n_labels=750,</span>
<span class="sd">            target=&#39;sign_gloss&#39;,</span>
<span class="sd">            sequence_max_length=10,</span>
<span class="sd">            use_3d=True,</span>
<span class="sd">        )</span>

<span class="sd">        my_dataset = LSFBIsolLandmarks(my_dataset_config)</span>
<span class="sd">        features, target = dataset[30]</span>
<span class="sd">        ```</span>

<span class="sd">    If you did not download the dataset, see `lsfb_dataset.Downloader`.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: The configuration object (see `LSFBContConfig`).</span>

<span class="sd">    Author:</span>
<span class="sd">        ppoitier (v 2.0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: add class properties to docstring</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LSFBIsolConfig</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_features</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>
        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span>

    <span class="k">def</span> <span class="nf">_load_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">pose_folder</span> <span class="o">=</span> <span class="s2">&quot;poses_raw&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_raw</span> <span class="k">else</span> <span class="s2">&quot;poses&quot;</span>
        <span class="n">coordinate_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_3d</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">all_features</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sequence_max_length</span>

        <span class="k">for</span> <span class="n">instance_id</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">,</span> <span class="n">disable</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">show_progress</span><span class="p">)):</span>
            <span class="n">instance_features</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">landmark_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">landmarks</span><span class="p">:</span>
                <span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pose_folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">landmark_set</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">instance_id</span><span class="si">}</span><span class="s2">.npy&quot;</span>
                <span class="n">lm_set_features</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filepath</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="n">coordinate_indices</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">max_len</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">lm_set_features</span> <span class="o">=</span> <span class="n">lm_set_features</span><span class="p">[:</span><span class="n">max_len</span><span class="p">]</span>
                <span class="n">instance_features</span><span class="p">[</span><span class="n">landmark_set</span><span class="p">]</span> <span class="o">=</span> <span class="n">lm_set_features</span>
            <span class="n">all_features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">instance_features</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">all_features</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="lsfb_dataset.datasets.lsfb_isol.landmarks_generator"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="lsfb_dataset.datasets.lsfb_isol.landmarks_generator.LSFBIsolLandmarksGenerator" class="doc doc-heading">
        <code>LSFBIsolLandmarksGenerator</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="lsfb_dataset.datasets.lsfb_isol.base.LSFBIsolBase">LSFBIsolBase</span></code></p>

  
      <p>Utility class to load the LSFB ISOL Landmarks dataset.
The dataset must be already downloaded!</p>
<p>All the landmarks and targets are lazily loaded.
Therefore, iterating over all the instances can be a bit slow.
If you have enough RAM and want faster iterations, use the <code>LSFBIsolLandmarks</code> class instead.</p>

<details class="example" open>
  <summary>Example</summary>
  <pre><code class="language-python">my_dataset_config = LSFBIsolConfig(
    root=&quot;./my_dataset&quot;,
    split=&quot;fold_1&quot;,
    n_labels=750,
    target='sign_gloss',
    sequence_max_length=10,
    use_3d=True,
)

my_dataset = LSFBIsolLandmarksGenerator(my_dataset_config)
features, target = dataset[30]
</code></pre>
</details>
<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b>config</b>
                  (<code><a class="autorefs autorefs-internal" title="lsfb_dataset.datasets.lsfb_isol.config.LSFBIsolConfig" href="#lsfb_dataset.datasets.lsfb_isol.config.LSFBIsolConfig">LSFBIsolConfig</a></code>)
              –
              <div class="doc-md-description">
                <p>The configuration object (see <code>LSFBContConfig</code>).</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<details class="author" open>
  <summary>Author</summary>
  <p>ppoitier (v 2.0)</p>
</details>

        <details class="quote">
          <summary>Source code in <code>lsfb-dataset/src/lsfb_dataset/datasets/lsfb_isol/landmarks_generator.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LSFBIsolLandmarksGenerator</span><span class="p">(</span><span class="n">LSFBIsolBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Utility class to load the LSFB ISOL Landmarks dataset.</span>
<span class="sd">        The dataset must be already downloaded!</span>

<span class="sd">        All the landmarks and targets are lazily loaded.</span>
<span class="sd">        Therefore, iterating over all the instances can be a bit slow.</span>
<span class="sd">        If you have enough RAM and want faster iterations, use the `LSFBIsolLandmarks` class instead.</span>

<span class="sd">        Example:</span>
<span class="sd">            ```python</span>
<span class="sd">            my_dataset_config = LSFBIsolConfig(</span>
<span class="sd">                root=&quot;./my_dataset&quot;,</span>
<span class="sd">                split=&quot;fold_1&quot;,</span>
<span class="sd">                n_labels=750,</span>
<span class="sd">                target=&#39;sign_gloss&#39;,</span>
<span class="sd">                sequence_max_length=10,</span>
<span class="sd">                use_3d=True,</span>
<span class="sd">            )</span>

<span class="sd">            my_dataset = LSFBIsolLandmarksGenerator(my_dataset_config)</span>
<span class="sd">            features, target = dataset[30]</span>
<span class="sd">            ```</span>

<span class="sd">        Args:</span>
<span class="sd">            config: The configuration object (see `LSFBContConfig`).</span>

<span class="sd">        Author:</span>
<span class="sd">            ppoitier (v 2.0)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">LSFBIsolConfig</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">instance_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_instance_features</span><span class="p">(</span><span class="n">instance_id</span><span class="p">)</span>
        <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targets</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">features</span><span class="p">,</span> <span class="n">target</span>

    <span class="k">def</span> <span class="nf">_load_instance_features</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_id</span><span class="p">):</span>
        <span class="n">pose_folder</span> <span class="o">=</span> <span class="s1">&#39;poses_raw&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_raw</span> <span class="k">else</span> <span class="s1">&#39;poses&#39;</span>
        <span class="n">coordinate_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">use_3d</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">sequence_max_length</span>
        <span class="n">instance_features</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">landmark_set</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">landmarks</span><span class="p">:</span>
            <span class="n">pose_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">root</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pose_folder</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">landmark_set</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">instance_id</span><span class="si">}</span><span class="s2">.npy&quot;</span>
            <span class="n">lm_set_features</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pose_path</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="n">coordinate_indices</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">max_len</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">lm_set_features</span> <span class="o">=</span> <span class="n">lm_set_features</span><span class="p">[:</span><span class="n">max_len</span><span class="p">]</span>
            <span class="n">instance_features</span><span class="p">[</span><span class="n">instance_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">lm_set_features</span>
        <span class="k">return</span> <span class="n">instance_features</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../lsfb_cont/" class="btn btn-neutral float-left" title="LSFB Cont"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../download/" class="btn btn-neutral float-right" title="Download Datasets">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../lsfb_cont/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../download/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
